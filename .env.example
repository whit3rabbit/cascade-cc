# LLM Provider Configuration
# Options: gemini, openrouter
LLM_PROVIDER=openrouter

# Model Configuration
# For gemini: gemini-2.0-flash, gemini-1.5-pro, etc.
# For openrouter: google/gemini-2.0-flash-exp:free, anthropic/claude-3-opus, etc.
LLM_MODEL=google/gemini-2.0-flash-exp:free

# API Keys (Provide at least one)
GEMINI_API_KEY=your_gemini_api_key_here
OPENROUTER_API_KEY=your_openrouter_api_key_here

# LLM Request Timeout (in milliseconds)
LLM_TIMEOUT_MS=300000

# Detection & Analysis Parameters
# Confidence for structural matches (0.0 to 1.0)
ANCHOR_KEY_CONFIDENCE=0.9
# Confidence for name matches (0.0 to 1.0)
ANCHOR_NAME_CONFIDENCE=0.85
# Minimum similarity for a chunk match (0.0 to 1.0)
ANCHOR_SIMILARITY_THRESHOLD=0.80
# Minimum similarity to be considered a proven vendor library
LIBRARY_MATCH_THRESHOLD=0.95
# Threshold to lock a match as high-confidence
ANCHOR_LOCK_THRESHOLD=0.98
# Confidence level for locked matches
ANCHOR_LOCK_CONFIDENCE=0.99
# Minimum similarity for assigning custom gold paths (0.0 to 1.0)
CUSTOM_GOLD_SIMILARITY_THRESHOLD=0.98

# ML Model Training Parameters (Reference defaults from ml/train.py)
ML_TRAIN_PRESET=production
ML_TRAIN_MARGIN=0.8
ML_TRAIN_LR=0.001
# Production default: Margin 0.8, LR 0.001, 32/256 (wider hidden for tougher library separation)
ML_TRAIN_EMBED_DIM=32
ML_TRAIN_HIDDEN_DIM=256
ML_TRAIN_EPOCHS=50
ML_TRAIN_BATCH_SIZE=64
ML_TRAIN_CHECKPOINT_INTERVAL=0
ML_TRAIN_LR_DECAY_EPOCH=0
ML_TRAIN_LR_DECAY_FACTOR=1.0
# Override context window size (0 disables; can also pass --max_nodes)
ML_MAX_NODES=0
# Validation controls
# Use multiple libraries when val_library is not set
ML_VAL_LIB_COUNT=5
# Use random split for validation (0 disables)
ML_VAL_SPLIT=0
# Cap validation chunks (0 disables)
ML_VAL_MAX_CHUNKS=100
#
# Note: sweeps currently use a fixed batch size (64) and multi-library validation
# inside ml/train.py; val controls are read from env but batch size is fixed.

# ML Nuclear Options (Variability/Robustness)
ML_LITERAL_DROPOUT=0.5
ML_NODE_MASKING=0.15
ML_SEQ_JITTER=0.3

# MARKOV damping factor (0.0 to 1.0)
MARKOV_DAMPING_FACTOR=0.85
# Target chunk size in tokens
CHUNKING_TOKEN_THRESHOLD=2000
# Spreading activation ratio threshold
SPREADING_THRESHOLD_RATIO=0.3
# Spreading activation count threshold
SPREADING_THRESHOLD_COUNT=2
# Vendor library in-degree threshold
VENDOR_LIBRARY_IN_DEGREE=15
# Vendor library out-degree threshold
VENDOR_LIBRARY_OUT_DEGREE=5
# Core orchestrator in-degree threshold
CORE_ORCHESTRATOR_IN_DEGREE=5
# Core orchestrator out-degree threshold
CORE_ORCHESTRATOR_OUT_DEGREE=5

# Refinement Controls
# Max characters per file for refinement (0 for no limit)
REFINE_CONTEXT_LIMIT=400000
